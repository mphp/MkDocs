<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Accessing the configuration - Automation project</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Accessing the configuration";
    var mkdocs_page_input_path = "configuration.md";
    var mkdocs_page_url = "/configuration/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-28268184-4', 'wiki.mphp.net');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Automation project</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Ecosystem</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../installing/">Installing the system</a>
                </li>
                <li class="">
                    
    <a class="" href="../ssh/">Setting up SSH</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Accessing the configuration</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#accessing-the-configuration">Accessing the configuration</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../ide/">Choosing the right IDE and extensions</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Home-Assistant</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../homeassistant/install_homeassistant/">Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../homeassistant/basic_config/">Basic configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../homeassistant/access_from_everywhere/">Access from everywhere</a>
                </li>
                <li class="">
                    
    <a class="" href="../homeassistant/device_tracking/">Device tracking</a>
                </li>
                <li class="">
                    
    <a class="" href="../homeassistant/zwave/">Z-Wave</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Retropie</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../retropie/install_retropie/">Ubuntu amd64 install</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">MkDocs</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../mkdocs/install_mkdocs/">Install, usage and tricks</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../about/">About</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Automation project</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Ecosystem &raquo;</li>
        
      
    
    <li>Accessing the configuration</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mphp/MkDocs/edit/master/docs/configuration.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="accessing-the-configuration">Accessing the configuration<a class="headerlink" href="#accessing-the-configuration" title="Permanent link">&para;</a></h1>
<p>There are many ways to access files on a remote host. As we are using a MacBook as our main development environment, here are the steps to make your remote host files accessible from your mac using Apple Filing Protocol.</p>
<pre><code class="bash">sudo apt-get install netatalk
</code></pre>

<p>Edit the configuration file</p>
<pre><code class="bash">sudo nano /etc/default/netatalk
</code></pre>

<p>and ensure the below are set correctly  :</p>
<pre><code>ATALKD_RUN=no
PAPD_RUN=no
CNID_METAD_RUN=yes
AFPD_RUN=yes
TIMELORD_RUN=no
A2BOOT_RUN=no
</code></pre>

<p>Save and exit (Ctrl+0 , Ctrl+x)</p>
<p>Then we need to specify which files we are going to share :</p>
<pre><code class="bash">sudo nano /etc/netatalk/AppleVolumes.default
</code></pre>

<p>at the very end of the file add the below :</p>
<pre><code>/your/path  VolumeName allow:@groupname options:usedots,upriv
</code></pre>

<p>Save and exit (Ctrl+0 , Ctrl+x)</p>
<p>So this could look like the below if you have used hassbian and Home Assistant is already installed:</p>
<pre><code>/home/homeassistant/.homeassistant  HomeAssistant allow:@groupname options:usedots,upriv
</code></pre>

<p>now restart the daemon :</p>
<pre><code class="bash">sudo /etc/init.d/netatalk restart
</code></pre>

<p>Theoretically, you should now be able to connect to your server from your MacBook. However this would require specifying the URI with the server hostname or IP address. Using Avahi, your server can advertise itself and automagically appear in your Finder.</p>
<pre><code class="bash">sudo apt-get install avahi-daemon libnss-mdns
</code></pre>

<p>Edit the configuration</p>
<pre><code class="bash">sudo nano /etc/nsswitch.conf
</code></pre>

<p>Modify the "hosts" line so that it looks like this:</p>
<pre><code>hosts: files mdns4_minimal [NOTFOUND=return] dns mdns4 mdns
</code></pre>

<p>Save and exit (Ctrl+0 , Ctrl+x)</p>
<p>Create a service file for the afp service</p>
<pre><code class="bash">sudo nano /etc/avahi/services/afpd.service
</code></pre>

<p>and add</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; standalone='no'?&gt;&lt;!--*-nxml-*--&gt;
&lt;!DOCTYPE service-group SYSTEM &quot;avahi-service.dtd&quot;&gt;
&lt;service-group&gt;
    &lt;name replace-wildcards=&quot;yes&quot;&gt;%h&lt;/name&gt;
    &lt;service&gt;
        &lt;type&gt;_afpovertcp._tcp&lt;/type&gt;
        &lt;port&gt;548&lt;/port&gt;
    &lt;/service&gt;
    &lt;service&gt;
        &lt;type&gt;_device-info._tcp&lt;/type&gt;
        &lt;port&gt;0&lt;/port&gt;
        &lt;txt-record&gt;model=MacPro&lt;/txt-record&gt;
    &lt;/service&gt;
&lt;/service-group&gt;
</code></pre>

<p>Save, exit (Ctrl+0 , Ctrl+x)</p>
<p>and restart the daemon :</p>
<pre><code class="bash">sudo /etc/init.d/avahi-daemon restart
</code></pre>

<p>You should now see your server from your OSX Finder.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ide/" class="btn btn-neutral float-right" title="Choosing the right IDE and extensions">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../ssh/" class="btn btn-neutral" title="Setting up SSH"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p><center>Copyright &copy; 2016 <a href="mailto:g.garnier@mphp.net"> G. Garnier </a></></p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mphp/MkDocs" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../ssh/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../ide/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
